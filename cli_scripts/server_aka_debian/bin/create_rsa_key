#!/bin/bash

me=$(basename "$0")
dir_path=$(dirname "$0")
now=$(date +%F_%H%M%S)

if [ $# -ne 1 ]
then
  printf "Usage: ${me} [(user)name] \n"
  exit 1
fi
set -e
set -x

key_username='$1'
key_bits='4096'
key_type='rsa'
key_target='demo'
key_comment="${key_username} ${key_type} key for ${key_target} stuff"
identity_file="./${key_username}_${key_type}_${key_target}"

ssh-keygen \
	-b "${key_bits}" \
	-t "${key_type}" \
	-N '...' \
	-C "${key_comment}" \
	-f "${identity_file}"

ls -al "${identity_file}\*"

set +x

printf "\nkey available; $ ssh -i ${identity_file} -l [user] [remote_host] \n\n"

